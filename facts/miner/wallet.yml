---
# Load receiver addresses

## Load Config ##

- name: Miner | Facts | Config File | Download
  shell: "scp {{ wallet_server }}:{{ wallet_file_remote }} {{ wallet_file_local }}; chmod 700 {{ wallet_file_local }}"

- name: Miner | Facts | Config File | Load XMR
  set_fact:
    wallet_xmr: "{{ lookup('ini', 'xmr, file={{wallet_file_local}}') }}"
  when: wallet_file_local is file
  ignore_errors: yes
- name: Miner | Facts | Config File | Load XMR
  set_fact:
    wallet_xmr: "{{ lookup('ini', 'xmr, section=null, file={{wallet_file_local}}') }}"
  when: wallet_file_local is file
  ignore_errors: yes
- name: Miner | Facts | Config File | Load XMR
  set_fact:
    wallet_xmr: "{{ lookup('ini', 'xmr, section=wallet, file={{wallet_file_local}}') }}"
  when: wallet_file_local is file
  ignore_errors: yes
- name: Miner | Facts | Config File | Load XMR
  set_fact:
    wallet_xmr: "{{ lookup('ini', 'xmr, section=global, file={{wallet_file_local}}') }}"
  when: wallet_file_local is file
  ignore_errors: yes

- name: Miner | Facts | Config File | Load ETH
  set_fact:
    wallet_eth: "{{ lookup('ini', 'eth, file={{wallet_file_local}}') }}"
  when: wallet_file_local is file
  ignore_errors: yes
- name: Miner | Facts | Config File | Load ETH
  set_fact:
    wallet_eth: "{{ lookup('ini', 'eth, section=null, file={{wallet_file_local}}') }}"
  when: wallet_file_local is file
  ignore_errors: yes
- name: Miner | Facts | Config File | Load ETH
  set_fact:
    wallet_eth: "{{ lookup('ini', 'eth, section=wallet, file={{wallet_file_local}}') }}"
  when: wallet_file_local is file
  ignore_errors: yes
- name: Miner | Facts | Config File | Load ETH
  set_fact:
    wallet_eth: "{{ lookup('ini', 'eth, section=global, file={{wallet_file_local}}') }}"
  when: wallet_file_local is file
  ignore_errors: yes


## Verify ##

- name: Miner | Facts | Config File | Load ETH
  debug:
    var: "{{ item }}"
  loop: 
    - wallet_xmr
    - wallet_eth
